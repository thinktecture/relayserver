<ion-header>
  <ion-toolbar>
    <ion-title>{{ name() }}</ion-title>
    <ion-buttons slot="start">
      @if (editing()) {
        <ion-button (click)="cancel()" [disabled]="loading()">
          Cancel
        </ion-button>
      } @else {
        <ion-back-button
          text="Tenants"
          defaultHref="/tabs/tenants"
        ></ion-back-button>
      }
    </ion-buttons>
    <ion-buttons slot="end">
      @if (editing()) {
        <ion-button
          strong
          (click)="save()"
          [disabled]="!form.valid || loading()"
          type="submit"
          form="tenant-details-form"
        >
          Done
        </ion-button>
      } @else {
        <ion-button (click)="edit()" [disabled]="loading() || error()">
          Edit
        </ion-button>
      }
    </ion-buttons>
    @if (loading()) {
      <ion-progress-bar type="indeterminate" />
    }
  </ion-toolbar>
</ion-header>

<ion-content>
  @if (error()) {
    <ion-list>
      <ion-item>
        <ion-note>Failed to load tenant</ion-note>
      </ion-item>
    </ion-list>
  } @else if (editing()) {
    <form [formGroup]="form" (ngSubmit)="save()" id="tenant-details-form">
      <app-edit-tenant />
    </form>
  } @else {
    @if (tenant$ | async; as tenant) {
      <app-view-tenant [tenant]="tenant" />

      <ion-list inset>
        <ion-item color="light" [routerLink]="['connections']" [button]="true">
          <ion-icon aria-hidden name="link-outline" slot="start" />
          <ion-label>Connections</ion-label>
        </ion-item>
      </ion-list>

      <ion-list inset>
        <ion-item color="light" [routerLink]="['statistics']" [button]="true">
          <ion-icon aria-hidden name="stats-chart-outline" slot="start" />
          <ion-label>Statistics</ion-label>
        </ion-item>
      </ion-list>
    }
  }
</ion-content>
